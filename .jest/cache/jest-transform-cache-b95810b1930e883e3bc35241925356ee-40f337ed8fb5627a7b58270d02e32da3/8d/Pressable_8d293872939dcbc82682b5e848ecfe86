584b6af42cc2c347ab5252cb957abd7e
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var React = _interopRequireWildcard(require("react"));

var _useAndroidRippleForView = _interopRequireDefault(require("./useAndroidRippleForView"));

var _PressabilityDebug = require("../../Pressability/PressabilityDebug");

var _usePressability = _interopRequireDefault(require("../../Pressability/usePressability"));

var _Rect = require("../../StyleSheet/Rect");

var _View = _interopRequireDefault(require("../View/View"));

var _excluded = ["accessible", "android_disableSound", "android_ripple", "cancelable", "children", "delayHoverIn", "delayHoverOut", "delayLongPress", "disabled", "focusable", "onHoverIn", "onHoverOut", "onLongPress", "onPress", "onPressIn", "onPressOut", "pressRetentionOffset", "style", "testOnly_pressed", "unstable_pressDelay"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function Pressable(props, forwardedRef) {
  var accessible = props.accessible,
      android_disableSound = props.android_disableSound,
      android_ripple = props.android_ripple,
      cancelable = props.cancelable,
      children = props.children,
      delayHoverIn = props.delayHoverIn,
      delayHoverOut = props.delayHoverOut,
      delayLongPress = props.delayLongPress,
      disabled = props.disabled,
      focusable = props.focusable,
      onHoverIn = props.onHoverIn,
      onHoverOut = props.onHoverOut,
      onLongPress = props.onLongPress,
      onPress = props.onPress,
      _onPressIn = props.onPressIn,
      _onPressOut = props.onPressOut,
      pressRetentionOffset = props.pressRetentionOffset,
      style = props.style,
      testOnly_pressed = props.testOnly_pressed,
      unstable_pressDelay = props.unstable_pressDelay,
      restProps = (0, _objectWithoutProperties2.default)(props, _excluded);
  var viewRef = (0, React.useRef)(null);
  (0, React.useImperativeHandle)(forwardedRef, function () {
    return viewRef.current;
  });
  var android_rippleConfig = (0, _useAndroidRippleForView.default)(android_ripple, viewRef);

  var _usePressState = usePressState(testOnly_pressed === true),
      _usePressState2 = (0, _slicedToArray2.default)(_usePressState, 2),
      pressed = _usePressState2[0],
      setPressed = _usePressState2[1];

  var hitSlop = (0, _Rect.normalizeRect)(props.hitSlop);
  var accessibilityState = disabled != null ? (0, _extends2.default)({}, props.accessibilityState, {
    disabled: disabled
  }) : props.accessibilityState;
  var restPropsWithDefaults = (0, _extends2.default)({}, restProps, android_rippleConfig == null ? void 0 : android_rippleConfig.viewProps, {
    accessible: accessible !== false,
    accessibilityState: accessibilityState,
    focusable: focusable !== false,
    hitSlop: hitSlop
  });
  var config = (0, React.useMemo)(function () {
    return {
      cancelable: cancelable,
      disabled: disabled,
      hitSlop: hitSlop,
      pressRectOffset: pressRetentionOffset,
      android_disableSound: android_disableSound,
      delayHoverIn: delayHoverIn,
      delayHoverOut: delayHoverOut,
      delayLongPress: delayLongPress,
      delayPressIn: unstable_pressDelay,
      onHoverIn: onHoverIn,
      onHoverOut: onHoverOut,
      onLongPress: onLongPress,
      onPress: onPress,
      onPressIn: function onPressIn(event) {
        if (android_rippleConfig != null) {
          android_rippleConfig.onPressIn(event);
        }

        setPressed(true);

        if (_onPressIn != null) {
          _onPressIn(event);
        }
      },
      onPressMove: android_rippleConfig == null ? void 0 : android_rippleConfig.onPressMove,
      onPressOut: function onPressOut(event) {
        if (android_rippleConfig != null) {
          android_rippleConfig.onPressOut(event);
        }

        setPressed(false);

        if (_onPressOut != null) {
          _onPressOut(event);
        }
      }
    };
  }, [android_disableSound, android_rippleConfig, cancelable, delayHoverIn, delayHoverOut, delayLongPress, disabled, hitSlop, onHoverIn, onHoverOut, onLongPress, onPress, _onPressIn, _onPressOut, pressRetentionOffset, setPressed, unstable_pressDelay]);
  var eventHandlers = (0, _usePressability.default)(config);
  return React.createElement(_View.default, (0, _extends2.default)({}, restPropsWithDefaults, eventHandlers, {
    ref: viewRef,
    style: typeof style === 'function' ? style({
      pressed: pressed
    }) : style,
    collapsable: false
  }), typeof children === 'function' ? children({
    pressed: pressed
  }) : children, __DEV__ ? React.createElement(_PressabilityDebug.PressabilityDebugView, {
    color: "red",
    hitSlop: hitSlop
  }) : null);
}

function usePressState(forcePressed) {
  var _useState = (0, React.useState)(false),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      pressed = _useState2[0],
      setPressed = _useState2[1];

  return [pressed || forcePressed, setPressed];
}

var MemoedPressable = React.memo(React.forwardRef(Pressable));
MemoedPressable.displayName = 'Pressable';
var _default = MemoedPressable;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmVzc2FibGUiLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImFjY2Vzc2libGUiLCJhbmRyb2lkX2Rpc2FibGVTb3VuZCIsImFuZHJvaWRfcmlwcGxlIiwiY2FuY2VsYWJsZSIsImNoaWxkcmVuIiwiZGVsYXlIb3ZlckluIiwiZGVsYXlIb3Zlck91dCIsImRlbGF5TG9uZ1ByZXNzIiwiZGlzYWJsZWQiLCJmb2N1c2FibGUiLCJvbkhvdmVySW4iLCJvbkhvdmVyT3V0Iiwib25Mb25nUHJlc3MiLCJvblByZXNzIiwib25QcmVzc0luIiwib25QcmVzc091dCIsInByZXNzUmV0ZW50aW9uT2Zmc2V0Iiwic3R5bGUiLCJ0ZXN0T25seV9wcmVzc2VkIiwidW5zdGFibGVfcHJlc3NEZWxheSIsInJlc3RQcm9wcyIsInZpZXdSZWYiLCJ1c2VSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiY3VycmVudCIsImFuZHJvaWRfcmlwcGxlQ29uZmlnIiwidXNlQW5kcm9pZFJpcHBsZUZvclZpZXciLCJ1c2VQcmVzc1N0YXRlIiwicHJlc3NlZCIsInNldFByZXNzZWQiLCJoaXRTbG9wIiwibm9ybWFsaXplUmVjdCIsImFjY2Vzc2liaWxpdHlTdGF0ZSIsInJlc3RQcm9wc1dpdGhEZWZhdWx0cyIsInZpZXdQcm9wcyIsImNvbmZpZyIsInVzZU1lbW8iLCJwcmVzc1JlY3RPZmZzZXQiLCJkZWxheVByZXNzSW4iLCJldmVudCIsIm9uUHJlc3NNb3ZlIiwiZXZlbnRIYW5kbGVycyIsInVzZVByZXNzYWJpbGl0eSIsIl9fREVWX18iLCJmb3JjZVByZXNzZWQiLCJ1c2VTdGF0ZSIsIk1lbW9lZFByZXNzYWJsZSIsIlJlYWN0IiwibWVtbyIsImZvcndhcmRSZWYiLCJkaXNwbGF5TmFtZSJdLCJzb3VyY2VzIjpbIlByZXNzYWJsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VNZW1vLCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VJbXBlcmF0aXZlSGFuZGxlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlQW5kcm9pZFJpcHBsZUZvclZpZXcsIHtcbiAgdHlwZSBSaXBwbGVDb25maWcsXG59IGZyb20gJy4vdXNlQW5kcm9pZFJpcHBsZUZvclZpZXcnO1xuaW1wb3J0IHR5cGUge1xuICBBY2Nlc3NpYmlsaXR5QWN0aW9uRXZlbnQsXG4gIEFjY2Vzc2liaWxpdHlBY3Rpb25JbmZvLFxuICBBY2Nlc3NpYmlsaXR5Um9sZSxcbiAgQWNjZXNzaWJpbGl0eVN0YXRlLFxuICBBY2Nlc3NpYmlsaXR5VmFsdWUsXG59IGZyb20gJy4uL1ZpZXcvVmlld0FjY2Vzc2liaWxpdHknO1xuaW1wb3J0IHtQcmVzc2FiaWxpdHlEZWJ1Z1ZpZXd9IGZyb20gJy4uLy4uL1ByZXNzYWJpbGl0eS9QcmVzc2FiaWxpdHlEZWJ1Zyc7XG5pbXBvcnQgdXNlUHJlc3NhYmlsaXR5IGZyb20gJy4uLy4uL1ByZXNzYWJpbGl0eS91c2VQcmVzc2FiaWxpdHknO1xuaW1wb3J0IHtub3JtYWxpemVSZWN0LCB0eXBlIFJlY3RPclNpemV9IGZyb20gJy4uLy4uL1N0eWxlU2hlZXQvUmVjdCc7XG5pbXBvcnQgdHlwZSB7XG4gIExheW91dEV2ZW50LFxuICBNb3VzZUV2ZW50LFxuICBQcmVzc0V2ZW50LFxufSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgVmlldyBmcm9tICcuLi9WaWV3L1ZpZXcnO1xuXG50eXBlIFZpZXdTdHlsZVByb3AgPSAkRWxlbWVudFR5cGU8UmVhY3QuRWxlbWVudENvbmZpZzx0eXBlb2YgVmlldz4sICdzdHlsZSc+O1xuXG5leHBvcnQgdHlwZSBTdGF0ZUNhbGxiYWNrVHlwZSA9ICRSZWFkT25seTx7fFxuICBwcmVzc2VkOiBib29sZWFuLFxufH0+O1xuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC8qKlxuICAgKiBBY2Nlc3NpYmlsaXR5LlxuICAgKi9cbiAgYWNjZXNzaWJpbGl0eUFjdGlvbnM/OiA/JFJlYWRPbmx5QXJyYXk8QWNjZXNzaWJpbGl0eUFjdGlvbkluZm8+LFxuICBhY2Nlc3NpYmlsaXR5RWxlbWVudHNIaWRkZW4/OiA/Ym9vbGVhbixcbiAgYWNjZXNzaWJpbGl0eUhpbnQ/OiA/U3RyaW5naXNoLFxuICBhY2Nlc3NpYmlsaXR5SWdub3Jlc0ludmVydENvbG9ycz86ID9ib29sZWFuLFxuICBhY2Nlc3NpYmlsaXR5TGFiZWw/OiA/U3RyaW5naXNoLFxuICBhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbj86ID8oJ25vbmUnIHwgJ3BvbGl0ZScgfCAnYXNzZXJ0aXZlJyksXG4gIGFjY2Vzc2liaWxpdHlSb2xlPzogP0FjY2Vzc2liaWxpdHlSb2xlLFxuICBhY2Nlc3NpYmlsaXR5U3RhdGU/OiA/QWNjZXNzaWJpbGl0eVN0YXRlLFxuICBhY2Nlc3NpYmlsaXR5VmFsdWU/OiA/QWNjZXNzaWJpbGl0eVZhbHVlLFxuICBhY2Nlc3NpYmlsaXR5Vmlld0lzTW9kYWw/OiA/Ym9vbGVhbixcbiAgYWNjZXNzaWJsZT86ID9ib29sZWFuLFxuICBmb2N1c2FibGU/OiA/Ym9vbGVhbixcbiAgaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eT86ID8oJ2F1dG8nIHwgJ3llcycgfCAnbm8nIHwgJ25vLWhpZGUtZGVzY2VuZGFudHMnKSxcbiAgb25BY2Nlc3NpYmlsaXR5QWN0aW9uPzogPyhldmVudDogQWNjZXNzaWJpbGl0eUFjdGlvbkV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogV2hldGhlciBhIHByZXNzIGdlc3R1cmUgY2FuIGJlIGludGVycnVwdGVkIGJ5IGEgcGFyZW50IGdlc3R1cmUgc3VjaCBhcyBhXG4gICAqIHNjcm9sbCBldmVudC4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICovXG4gIGNhbmNlbGFibGU/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogRWl0aGVyIGNoaWxkcmVuIG9yIGEgcmVuZGVyIHByb3AgdGhhdCByZWNlaXZlcyBhIGJvb2xlYW4gcmVmbGVjdGluZyB3aGV0aGVyXG4gICAqIHRoZSBjb21wb25lbnQgaXMgY3VycmVudGx5IHByZXNzZWQuXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuTm9kZSB8ICgoc3RhdGU6IFN0YXRlQ2FsbGJhY2tUeXBlKSA9PiBSZWFjdC5Ob2RlKSxcblxuICAvKipcbiAgICogRHVyYXRpb24gdG8gd2FpdCBhZnRlciBob3ZlciBpbiBiZWZvcmUgY2FsbGluZyBgb25Ib3ZlckluYC5cbiAgICovXG4gIGRlbGF5SG92ZXJJbj86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIER1cmF0aW9uIHRvIHdhaXQgYWZ0ZXIgaG92ZXIgb3V0IGJlZm9yZSBjYWxsaW5nIGBvbkhvdmVyT3V0YC5cbiAgICovXG4gIGRlbGF5SG92ZXJPdXQ/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBEdXJhdGlvbiAoaW4gbWlsbGlzZWNvbmRzKSBmcm9tIGBvblByZXNzSW5gIGJlZm9yZSBgb25Mb25nUHJlc3NgIGlzIGNhbGxlZC5cbiAgICovXG4gIGRlbGF5TG9uZ1ByZXNzPzogP251bWJlcixcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgcHJlc3MgYmVoYXZpb3IgaXMgZGlzYWJsZWQuXG4gICAqL1xuICBkaXNhYmxlZD86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBBZGRpdGlvbmFsIGRpc3RhbmNlIG91dHNpZGUgb2YgdGhpcyB2aWV3IGluIHdoaWNoIGEgcHJlc3MgaXMgZGV0ZWN0ZWQuXG4gICAqL1xuICBoaXRTbG9wPzogP1JlY3RPclNpemUsXG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgZGlzdGFuY2Ugb3V0c2lkZSBvZiB0aGlzIHZpZXcgaW4gd2hpY2ggYSB0b3VjaCBpcyBjb25zaWRlcmVkIGFcbiAgICogcHJlc3MgYmVmb3JlIGBvblByZXNzT3V0YCBpcyB0cmlnZ2VyZWQuXG4gICAqL1xuICBwcmVzc1JldGVudGlvbk9mZnNldD86ID9SZWN0T3JTaXplLFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGlzIHZpZXcncyBsYXlvdXQgY2hhbmdlcy5cbiAgICovXG4gIG9uTGF5b3V0PzogPyhldmVudDogTGF5b3V0RXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgaG92ZXIgaXMgYWN0aXZhdGVkIHRvIHByb3ZpZGUgdmlzdWFsIGZlZWRiYWNrLlxuICAgKi9cbiAgb25Ib3ZlckluPzogPyhldmVudDogTW91c2VFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBob3ZlciBpcyBkZWFjdGl2YXRlZCB0byB1bmRvIHZpc3VhbCBmZWVkYmFjay5cbiAgICovXG4gIG9uSG92ZXJPdXQ/OiA/KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBsb25nLXRhcCBnZXN0dXJlIGlzIGRldGVjdGVkLlxuICAgKi9cbiAgb25Mb25nUHJlc3M/OiA/KGV2ZW50OiBQcmVzc0V2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBzaW5nbGUgdGFwIGdlc3R1cmUgaXMgZGV0ZWN0ZWQuXG4gICAqL1xuICBvblByZXNzPzogPyhldmVudDogUHJlc3NFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgdG91Y2ggaXMgZW5nYWdlZCBiZWZvcmUgYG9uUHJlc3NgLlxuICAgKi9cbiAgb25QcmVzc0luPzogPyhldmVudDogUHJlc3NFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgdG91Y2ggaXMgcmVsZWFzZWQgYmVmb3JlIGBvblByZXNzYC5cbiAgICovXG4gIG9uUHJlc3NPdXQ/OiA/KGV2ZW50OiBQcmVzc0V2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogRWl0aGVyIHZpZXcgc3R5bGVzIG9yIGEgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIGJvb2xlYW4gcmVmbGVjdGluZyB3aGV0aGVyXG4gICAqIHRoZSBjb21wb25lbnQgaXMgY3VycmVudGx5IHByZXNzZWQgYW5kIHJldHVybnMgdmlldyBzdHlsZXMuXG4gICAqL1xuICBzdHlsZT86IFZpZXdTdHlsZVByb3AgfCAoKHN0YXRlOiBTdGF0ZUNhbGxiYWNrVHlwZSkgPT4gVmlld1N0eWxlUHJvcCksXG5cbiAgLyoqXG4gICAqIElkZW50aWZpZXIgdXNlZCB0byBmaW5kIHRoaXMgdmlldyBpbiB0ZXN0cy5cbiAgICovXG4gIHRlc3RJRD86ID9zdHJpbmcsXG5cbiAgLyoqXG4gICAqIElmIHRydWUsIGRvZXNuJ3QgcGxheSBzeXN0ZW0gc291bmQgb24gdG91Y2guXG4gICAqL1xuICBhbmRyb2lkX2Rpc2FibGVTb3VuZD86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBFbmFibGVzIHRoZSBBbmRyb2lkIHJpcHBsZSBlZmZlY3QgYW5kIGNvbmZpZ3VyZXMgaXRzIGNvbG9yLlxuICAgKi9cbiAgYW5kcm9pZF9yaXBwbGU/OiA/UmlwcGxlQ29uZmlnLFxuXG4gIC8qKlxuICAgKiBVc2VkIG9ubHkgZm9yIGRvY3VtZW50YXRpb24gb3IgdGVzdGluZyAoZS5nLiBzbmFwc2hvdCB0ZXN0aW5nKS5cbiAgICovXG4gIHRlc3RPbmx5X3ByZXNzZWQ/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogRHVyYXRpb24gdG8gd2FpdCBhZnRlciBwcmVzcyBkb3duIGJlZm9yZSBjYWxsaW5nIGBvblByZXNzSW5gLlxuICAgKi9cbiAgdW5zdGFibGVfcHJlc3NEZWxheT86ID9udW1iZXIsXG58fT47XG5cbi8qKlxuICogQ29tcG9uZW50IHVzZWQgdG8gYnVpbGQgZGlzcGxheSBjb21wb25lbnRzIHRoYXQgc2hvdWxkIHJlc3BvbmQgdG8gd2hldGhlciB0aGVcbiAqIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgcHJlc3NlZCBvciBub3QuXG4gKi9cbmZ1bmN0aW9uIFByZXNzYWJsZShwcm9wczogUHJvcHMsIGZvcndhcmRlZFJlZik6IFJlYWN0Lk5vZGUge1xuICBjb25zdCB7XG4gICAgYWNjZXNzaWJsZSxcbiAgICBhbmRyb2lkX2Rpc2FibGVTb3VuZCxcbiAgICBhbmRyb2lkX3JpcHBsZSxcbiAgICBjYW5jZWxhYmxlLFxuICAgIGNoaWxkcmVuLFxuICAgIGRlbGF5SG92ZXJJbixcbiAgICBkZWxheUhvdmVyT3V0LFxuICAgIGRlbGF5TG9uZ1ByZXNzLFxuICAgIGRpc2FibGVkLFxuICAgIGZvY3VzYWJsZSxcbiAgICBvbkhvdmVySW4sXG4gICAgb25Ib3Zlck91dCxcbiAgICBvbkxvbmdQcmVzcyxcbiAgICBvblByZXNzLFxuICAgIG9uUHJlc3NJbixcbiAgICBvblByZXNzT3V0LFxuICAgIHByZXNzUmV0ZW50aW9uT2Zmc2V0LFxuICAgIHN0eWxlLFxuICAgIHRlc3RPbmx5X3ByZXNzZWQsXG4gICAgdW5zdGFibGVfcHJlc3NEZWxheSxcbiAgICAuLi5yZXN0UHJvcHNcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHZpZXdSZWYgPSB1c2VSZWY8UmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlldz4gfCBudWxsPihudWxsKTtcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShmb3J3YXJkZWRSZWYsICgpID0+IHZpZXdSZWYuY3VycmVudCk7XG5cbiAgY29uc3QgYW5kcm9pZF9yaXBwbGVDb25maWcgPSB1c2VBbmRyb2lkUmlwcGxlRm9yVmlldyhhbmRyb2lkX3JpcHBsZSwgdmlld1JlZik7XG5cbiAgY29uc3QgW3ByZXNzZWQsIHNldFByZXNzZWRdID0gdXNlUHJlc3NTdGF0ZSh0ZXN0T25seV9wcmVzc2VkID09PSB0cnVlKTtcblxuICBjb25zdCBoaXRTbG9wID0gbm9ybWFsaXplUmVjdChwcm9wcy5oaXRTbG9wKTtcblxuICBjb25zdCBhY2Nlc3NpYmlsaXR5U3RhdGUgPVxuICAgIGRpc2FibGVkICE9IG51bGxcbiAgICAgID8gey4uLnByb3BzLmFjY2Vzc2liaWxpdHlTdGF0ZSwgZGlzYWJsZWR9XG4gICAgICA6IHByb3BzLmFjY2Vzc2liaWxpdHlTdGF0ZTtcblxuICBjb25zdCByZXN0UHJvcHNXaXRoRGVmYXVsdHM6IFJlYWN0LkVsZW1lbnRDb25maWc8dHlwZW9mIFZpZXc+ID0ge1xuICAgIC4uLnJlc3RQcm9wcyxcbiAgICAuLi5hbmRyb2lkX3JpcHBsZUNvbmZpZz8udmlld1Byb3BzLFxuICAgIGFjY2Vzc2libGU6IGFjY2Vzc2libGUgIT09IGZhbHNlLFxuICAgIGFjY2Vzc2liaWxpdHlTdGF0ZSxcbiAgICBmb2N1c2FibGU6IGZvY3VzYWJsZSAhPT0gZmFsc2UsXG4gICAgaGl0U2xvcCxcbiAgfTtcblxuICBjb25zdCBjb25maWcgPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBjYW5jZWxhYmxlLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBoaXRTbG9wLFxuICAgICAgcHJlc3NSZWN0T2Zmc2V0OiBwcmVzc1JldGVudGlvbk9mZnNldCxcbiAgICAgIGFuZHJvaWRfZGlzYWJsZVNvdW5kLFxuICAgICAgZGVsYXlIb3ZlckluLFxuICAgICAgZGVsYXlIb3Zlck91dCxcbiAgICAgIGRlbGF5TG9uZ1ByZXNzLFxuICAgICAgZGVsYXlQcmVzc0luOiB1bnN0YWJsZV9wcmVzc0RlbGF5LFxuICAgICAgb25Ib3ZlckluLFxuICAgICAgb25Ib3Zlck91dCxcbiAgICAgIG9uTG9uZ1ByZXNzLFxuICAgICAgb25QcmVzcyxcbiAgICAgIG9uUHJlc3NJbihldmVudDogUHJlc3NFdmVudCk6IHZvaWQge1xuICAgICAgICBpZiAoYW5kcm9pZF9yaXBwbGVDb25maWcgIT0gbnVsbCkge1xuICAgICAgICAgIGFuZHJvaWRfcmlwcGxlQ29uZmlnLm9uUHJlc3NJbihldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0UHJlc3NlZCh0cnVlKTtcbiAgICAgICAgaWYgKG9uUHJlc3NJbiAhPSBudWxsKSB7XG4gICAgICAgICAgb25QcmVzc0luKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJlc3NNb3ZlOiBhbmRyb2lkX3JpcHBsZUNvbmZpZz8ub25QcmVzc01vdmUsXG4gICAgICBvblByZXNzT3V0KGV2ZW50OiBQcmVzc0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmIChhbmRyb2lkX3JpcHBsZUNvbmZpZyAhPSBudWxsKSB7XG4gICAgICAgICAgYW5kcm9pZF9yaXBwbGVDb25maWcub25QcmVzc091dChldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0UHJlc3NlZChmYWxzZSk7XG4gICAgICAgIGlmIChvblByZXNzT3V0ICE9IG51bGwpIHtcbiAgICAgICAgICBvblByZXNzT3V0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KSxcbiAgICBbXG4gICAgICBhbmRyb2lkX2Rpc2FibGVTb3VuZCxcbiAgICAgIGFuZHJvaWRfcmlwcGxlQ29uZmlnLFxuICAgICAgY2FuY2VsYWJsZSxcbiAgICAgIGRlbGF5SG92ZXJJbixcbiAgICAgIGRlbGF5SG92ZXJPdXQsXG4gICAgICBkZWxheUxvbmdQcmVzcyxcbiAgICAgIGRpc2FibGVkLFxuICAgICAgaGl0U2xvcCxcbiAgICAgIG9uSG92ZXJJbixcbiAgICAgIG9uSG92ZXJPdXQsXG4gICAgICBvbkxvbmdQcmVzcyxcbiAgICAgIG9uUHJlc3MsXG4gICAgICBvblByZXNzSW4sXG4gICAgICBvblByZXNzT3V0LFxuICAgICAgcHJlc3NSZXRlbnRpb25PZmZzZXQsXG4gICAgICBzZXRQcmVzc2VkLFxuICAgICAgdW5zdGFibGVfcHJlc3NEZWxheSxcbiAgICBdLFxuICApO1xuICBjb25zdCBldmVudEhhbmRsZXJzID0gdXNlUHJlc3NhYmlsaXR5KGNvbmZpZyk7XG5cbiAgcmV0dXJuIChcbiAgICA8Vmlld1xuICAgICAgey4uLnJlc3RQcm9wc1dpdGhEZWZhdWx0c31cbiAgICAgIHsuLi5ldmVudEhhbmRsZXJzfVxuICAgICAgcmVmPXt2aWV3UmVmfVxuICAgICAgc3R5bGU9e3R5cGVvZiBzdHlsZSA9PT0gJ2Z1bmN0aW9uJyA/IHN0eWxlKHtwcmVzc2VkfSkgOiBzdHlsZX1cbiAgICAgIGNvbGxhcHNhYmxlPXtmYWxzZX0+XG4gICAgICB7dHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nID8gY2hpbGRyZW4oe3ByZXNzZWR9KSA6IGNoaWxkcmVufVxuICAgICAge19fREVWX18gPyA8UHJlc3NhYmlsaXR5RGVidWdWaWV3IGNvbG9yPVwicmVkXCIgaGl0U2xvcD17aGl0U2xvcH0gLz4gOiBudWxsfVxuICAgIDwvVmlldz5cbiAgKTtcbn1cblxuZnVuY3Rpb24gdXNlUHJlc3NTdGF0ZShmb3JjZVByZXNzZWQ6IGJvb2xlYW4pOiBbYm9vbGVhbiwgKGJvb2xlYW4pID0+IHZvaWRdIHtcbiAgY29uc3QgW3ByZXNzZWQsIHNldFByZXNzZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICByZXR1cm4gW3ByZXNzZWQgfHwgZm9yY2VQcmVzc2VkLCBzZXRQcmVzc2VkXTtcbn1cblxuY29uc3QgTWVtb2VkUHJlc3NhYmxlID0gUmVhY3QubWVtbyhSZWFjdC5mb3J3YXJkUmVmKFByZXNzYWJsZSkpO1xuTWVtb2VkUHJlc3NhYmxlLmRpc3BsYXlOYW1lID0gJ1ByZXNzYWJsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChNZW1vZWRQcmVzc2FibGU6IFJlYWN0LkFic3RyYWN0Q29tcG9uZW50PFxuICBQcm9wcyxcbiAgUmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlldz4sXG4+KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQVVBOztBQUVBOztBQVVBOztBQUNBOztBQUNBOztBQU1BOzs7Ozs7OztBQTZJ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
{"version":3,"names":["Object","defineProperty","exports","value","default","deepCyclicCopy","EMPTY","Set","options","blacklist","keepPrototype","cycles","WeakMap","Buffer","isBuffer","has","get","Array","isArray","deepCyclicCopyArray","deepCyclicCopyObject","object","newObject","create","getPrototypeOf","descriptors","getOwnPropertyDescriptors","set","keys","forEach","key","descriptor","configurable","defineProperties","array","newArray","constructor","length","i"],"sources":["deepCyclicCopy.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = deepCyclicCopy;\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst EMPTY = new Set();\n\nfunction deepCyclicCopy(\n  value,\n  options = {\n    blacklist: EMPTY,\n    keepPrototype: false\n  },\n  cycles = new WeakMap()\n) {\n  if (typeof value !== 'object' || value === null || Buffer.isBuffer(value)) {\n    return value;\n  } else if (cycles.has(value)) {\n    return cycles.get(value);\n  } else if (Array.isArray(value)) {\n    return deepCyclicCopyArray(value, options, cycles);\n  } else {\n    return deepCyclicCopyObject(value, options, cycles);\n  }\n}\n\nfunction deepCyclicCopyObject(object, options, cycles) {\n  const newObject = options.keepPrototype\n    ? Object.create(Object.getPrototypeOf(object))\n    : {};\n  const descriptors = Object.getOwnPropertyDescriptors(object);\n  cycles.set(object, newObject);\n  Object.keys(descriptors).forEach(key => {\n    if (options.blacklist && options.blacklist.has(key)) {\n      delete descriptors[key];\n      return;\n    }\n\n    const descriptor = descriptors[key];\n\n    if (typeof descriptor.value !== 'undefined') {\n      descriptor.value = deepCyclicCopy(\n        descriptor.value,\n        {\n          blacklist: EMPTY,\n          keepPrototype: options.keepPrototype\n        },\n        cycles\n      );\n    }\n\n    descriptor.configurable = true;\n  });\n  return Object.defineProperties(newObject, descriptors);\n}\n\nfunction deepCyclicCopyArray(array, options, cycles) {\n  const newArray = options.keepPrototype\n    ? new (Object.getPrototypeOf(array).constructor)(array.length)\n    : [];\n  const length = array.length;\n  cycles.set(array, newArray);\n\n  for (let i = 0; i < length; i++) {\n    newArray[i] = deepCyclicCopy(\n      array[i],\n      {\n        blacklist: EMPTY,\n        keepPrototype: options.keepPrototype\n      },\n      cycles\n    );\n  }\n\n  return newArray;\n}\n"],"mappings":"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"}
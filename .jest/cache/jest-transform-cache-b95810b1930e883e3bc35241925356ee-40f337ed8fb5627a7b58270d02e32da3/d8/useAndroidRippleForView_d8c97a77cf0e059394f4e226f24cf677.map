{"version":3,"names":["useAndroidRippleForView","rippleConfig","viewRef","color","borderless","radius","foreground","useMemo","Platform","OS","Version","processedColor","processColor","invariant","nativeRippleValue","type","rippleRadius","viewProps","nativeForegroundAndroid","nativeBackgroundAndroid","onPressIn","event","view","current","Commands","hotspotUpdate","nativeEvent","locationX","locationY","setPressed","onPressMove","onPressOut"],"sources":["useAndroidRippleForView.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport invariant from 'invariant';\nimport {Commands} from '../View/ViewNativeComponent';\nimport type {ColorValue} from '../../StyleSheet/StyleSheet';\nimport type {PressEvent} from '../../Types/CoreEventTypes';\nimport {Platform, View, processColor} from 'react-native';\nimport * as React from 'react';\nimport {useMemo} from 'react';\n\ntype NativeBackgroundProp = $ReadOnly<{|\n  type: 'RippleAndroid',\n  color: ?number,\n  borderless: boolean,\n  rippleRadius: ?number,\n|}>;\n\nexport type RippleConfig = {|\n  color?: ColorValue,\n  borderless?: boolean,\n  radius?: number,\n  foreground?: boolean,\n|};\n\n/**\n * Provides the event handlers and props for configuring the ripple effect on\n * supported versions of Android.\n */\nexport default function useAndroidRippleForView(\n  rippleConfig: ?RippleConfig,\n  viewRef: {|current: null | React.ElementRef<typeof View>|},\n): ?$ReadOnly<{|\n  onPressIn: (event: PressEvent) => void,\n  onPressMove: (event: PressEvent) => void,\n  onPressOut: (event: PressEvent) => void,\n  viewProps:\n    | $ReadOnly<{|nativeBackgroundAndroid: NativeBackgroundProp|}>\n    | $ReadOnly<{|nativeForegroundAndroid: NativeBackgroundProp|}>,\n|}> {\n  const {color, borderless, radius, foreground} = rippleConfig ?? {};\n\n  return useMemo(() => {\n    if (\n      Platform.OS === 'android' &&\n      Platform.Version >= 21 &&\n      (color != null || borderless != null || radius != null)\n    ) {\n      const processedColor = processColor(color);\n      invariant(\n        processedColor == null || typeof processedColor === 'number',\n        'Unexpected color given for Ripple color',\n      );\n\n      const nativeRippleValue = {\n        type: 'RippleAndroid',\n        color: processedColor,\n        borderless: borderless === true,\n        rippleRadius: radius,\n      };\n\n      return {\n        viewProps:\n          foreground === true\n            ? {nativeForegroundAndroid: nativeRippleValue}\n            : {nativeBackgroundAndroid: nativeRippleValue},\n        onPressIn(event: PressEvent): void {\n          const view = viewRef.current;\n          if (view != null) {\n            Commands.hotspotUpdate(\n              view,\n              event.nativeEvent.locationX ?? 0,\n              event.nativeEvent.locationY ?? 0,\n            );\n            Commands.setPressed(view, true);\n          }\n        },\n        onPressMove(event: PressEvent): void {\n          const view = viewRef.current;\n          if (view != null) {\n            Commands.hotspotUpdate(\n              view,\n              event.nativeEvent.locationX ?? 0,\n              event.nativeEvent.locationY ?? 0,\n            );\n          }\n        },\n        onPressOut(event: PressEvent): void {\n          const view = viewRef.current;\n          if (view != null) {\n            Commands.setPressed(view, false);\n          }\n        },\n      };\n    }\n    return null;\n  }, [borderless, color, foreground, radius, viewRef]);\n}\n"],"mappings":";;;;;;;AAUA;;AACA;;AAGA;;AACA;;;;;;AAqBe,SAASA,uBAAT,CACbC,YADa,EAEbC,OAFa,EAUX;EACF,WAAgDD,YAAhD,WAAgDA,YAAhD,GAAgE,EAAhE;EAAA,IAAOE,KAAP,QAAOA,KAAP;EAAA,IAAcC,UAAd,QAAcA,UAAd;EAAA,IAA0BC,MAA1B,QAA0BA,MAA1B;EAAA,IAAkCC,UAAlC,QAAkCA,UAAlC;;EAEA,OAAO,IAAAC,aAAA,EAAQ,YAAM;IACnB,IACEC,qBAAA,CAASC,EAAT,KAAgB,SAAhB,IACAD,qBAAA,CAASE,OAAT,IAAoB,EADpB,KAECP,KAAK,IAAI,IAAT,IAAiBC,UAAU,IAAI,IAA/B,IAAuCC,MAAM,IAAI,IAFlD,CADF,EAIE;MACA,IAAMM,cAAc,GAAG,IAAAC,yBAAA,EAAaT,KAAb,CAAvB;MACA,IAAAU,kBAAA,EACEF,cAAc,IAAI,IAAlB,IAA0B,OAAOA,cAAP,KAA0B,QADtD,EAEE,yCAFF;MAKA,IAAMG,iBAAiB,GAAG;QACxBC,IAAI,EAAE,eADkB;QAExBZ,KAAK,EAAEQ,cAFiB;QAGxBP,UAAU,EAAEA,UAAU,KAAK,IAHH;QAIxBY,YAAY,EAAEX;MAJU,CAA1B;MAOA,OAAO;QACLY,SAAS,EACPX,UAAU,KAAK,IAAf,GACI;UAACY,uBAAuB,EAAEJ;QAA1B,CADJ,GAEI;UAACK,uBAAuB,EAAEL;QAA1B,CAJD;QAKLM,SALK,qBAKKC,KALL,EAK8B;UACjC,IAAMC,IAAI,GAAGpB,OAAO,CAACqB,OAArB;;UACA,IAAID,IAAI,IAAI,IAAZ,EAAkB;YAAA;;YAChBE,6BAAA,CAASC,aAAT,CACEH,IADF,2BAEED,KAAK,CAACK,WAAN,CAAkBC,SAFpB,oCAEiC,CAFjC,4BAGEN,KAAK,CAACK,WAAN,CAAkBE,SAHpB,qCAGiC,CAHjC;;YAKAJ,6BAAA,CAASK,UAAT,CAAoBP,IAApB,EAA0B,IAA1B;UACD;QACF,CAfI;QAgBLQ,WAhBK,uBAgBOT,KAhBP,EAgBgC;UACnC,IAAMC,IAAI,GAAGpB,OAAO,CAACqB,OAArB;;UACA,IAAID,IAAI,IAAI,IAAZ,EAAkB;YAAA;;YAChBE,6BAAA,CAASC,aAAT,CACEH,IADF,4BAEED,KAAK,CAACK,WAAN,CAAkBC,SAFpB,qCAEiC,CAFjC,4BAGEN,KAAK,CAACK,WAAN,CAAkBE,SAHpB,qCAGiC,CAHjC;UAKD;QACF,CAzBI;QA0BLG,UA1BK,sBA0BMV,KA1BN,EA0B+B;UAClC,IAAMC,IAAI,GAAGpB,OAAO,CAACqB,OAArB;;UACA,IAAID,IAAI,IAAI,IAAZ,EAAkB;YAChBE,6BAAA,CAASK,UAAT,CAAoBP,IAApB,EAA0B,KAA1B;UACD;QACF;MA/BI,CAAP;IAiCD;;IACD,OAAO,IAAP;EACD,CAtDM,EAsDJ,CAAClB,UAAD,EAAaD,KAAb,EAAoBG,UAApB,EAAgCD,MAAhC,EAAwCH,OAAxC,CAtDI,CAAP;AAuDD"}
{"version":3,"names":["customBubblingEventTypes","customDirectEventTypes","exports","viewConfigCallbacks","Map","viewConfigs","processEventTypes","viewConfig","bubblingEventTypes","directEventTypes","__DEV__","topLevelType","invariant","register","name","callback","has","set","get","test"],"sources":["ReactNativeViewConfigRegistry.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @noformat\n * @flow strict-local\n * @generated SignedSource<<a81ed33269e71024fedad145e843fab0>>\n *\n * This file was sync'd from the facebook/react repository.\n */\n\n'use strict';\n\nimport {type ViewConfig} from './ReactNativeTypes';\nimport invariant from 'invariant';\n\n// Event configs\nconst customBubblingEventTypes: {\n  [eventName: string]: $ReadOnly<{|\n    phasedRegistrationNames: $ReadOnly<{|\n      captured: string,\n      bubbled: string,\n    |}>,\n  |}>,\n  ...,\n} = {};\nconst customDirectEventTypes: {\n  [eventName: string]: $ReadOnly<{|\n    registrationName: string,\n  |}>,\n  ...,\n} = {};\n\nexports.customBubblingEventTypes = customBubblingEventTypes;\nexports.customDirectEventTypes = customDirectEventTypes;\n\nconst viewConfigCallbacks = new Map();\nconst viewConfigs = new Map();\n\nfunction processEventTypes(viewConfig: ViewConfig): void {\n  const {bubblingEventTypes, directEventTypes} = viewConfig;\n\n  if (__DEV__) {\n    if (bubblingEventTypes != null && directEventTypes != null) {\n      for (const topLevelType in directEventTypes) {\n        invariant(\n          bubblingEventTypes[topLevelType] == null,\n          'Event cannot be both direct and bubbling: %s',\n          topLevelType,\n        );\n      }\n    }\n  }\n\n  if (bubblingEventTypes != null) {\n    for (const topLevelType in bubblingEventTypes) {\n      if (customBubblingEventTypes[topLevelType] == null) {\n        customBubblingEventTypes[topLevelType] =\n          bubblingEventTypes[topLevelType];\n      }\n    }\n  }\n\n  if (directEventTypes != null) {\n    for (const topLevelType in directEventTypes) {\n      if (customDirectEventTypes[topLevelType] == null) {\n        customDirectEventTypes[topLevelType] = directEventTypes[topLevelType];\n      }\n    }\n  }\n}\n\n/**\n * Registers a native view/component by name.\n * A callback is provided to load the view config from UIManager.\n * The callback is deferred until the view is actually rendered.\n */\nexports.register = function(name: string, callback: () => ViewConfig): string {\n  invariant(\n    !viewConfigCallbacks.has(name),\n    'Tried to register two views with the same name %s',\n    name,\n  );\n  invariant(\n    typeof callback === 'function',\n    'View config getter callback for component `%s` must be a function (received `%s`)',\n    name,\n    callback === null ? 'null' : typeof callback,\n  );\n  viewConfigCallbacks.set(name, callback);\n  return name;\n};\n\n/**\n * Retrieves a config for the specified view.\n * If this is the first time the view has been used,\n * This configuration will be lazy-loaded from UIManager.\n */\nexports.get = function(name: string): ViewConfig {\n  let viewConfig;\n  if (!viewConfigs.has(name)) {\n    const callback = viewConfigCallbacks.get(name);\n    if (typeof callback !== 'function') {\n      invariant(\n        false,\n        'View config getter callback for component `%s` must be a function (received `%s`).%s',\n        name,\n        callback === null ? 'null' : typeof callback,\n        typeof name[0] === 'string' && /[a-z]/.test(name[0])\n          ? ' Make sure to start component names with a capital letter.'\n          : '',\n      );\n    }\n    viewConfig = callback();\n    processEventTypes(viewConfig);\n    viewConfigs.set(name, viewConfig);\n\n    // Clear the callback after the config is set so that\n    // we don't mask any errors during registration.\n    viewConfigCallbacks.set(name, null);\n  } else {\n    viewConfig = viewConfigs.get(name);\n  }\n  invariant(viewConfig, 'View config not found for name %s', name);\n  return viewConfig;\n};\n"],"mappings":"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"}